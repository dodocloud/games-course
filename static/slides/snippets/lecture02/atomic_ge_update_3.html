<p><span style="color:#E040FB;">void</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#40C4FF;">Engine</span><span style="color:#F8F8F0;">::</span><span style="color:#B2FF59;">Update</span><span style="color:#F8F8F0;">() {&nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; VariantMap</span><span style="color:#FF5252;">&amp;</span><span style="color:#F8F8F0;">&nbsp;eventData&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#B2FF59;">GetEventDataMap</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; eventData[P_TIMESTEP]&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;timeStep_;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#B2FF59;">SendEvent</span><span style="color:#F8F8F0;">(E_UPDATE,&nbsp;eventData);</span></p>
<p><span style="color:#F8F8F0;">&nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#aaa;">//&nbsp;Logic&nbsp;post-update&nbsp;event</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#B2FF59;">SendEvent</span><span style="color:#F8F8F0;">(E_POSTUPDATE,&nbsp;eventData);</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#aaa;">//&nbsp;Rendering&nbsp;update&nbsp;event</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#B2FF59;">SendEvent</span><span style="color:#F8F8F0;">(E_RENDERUPDATE,&nbsp;eventData);</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#aaa;">//&nbsp;Post-render&nbsp;update&nbsp;event</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#B2FF59;">SendEvent</span><span style="color:#F8F8F0;">(E_POSTRENDERUPDATE,&nbsp;eventData);</span></p>
<p><span style="color:#F8F8F0;">}</span></p>
<p><span style="color:#F8F8F0;">&nbsp;</span></p>
<p><span style="color:#E040FB;">void</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#40C4FF;">Engine</span><span style="color:#F8F8F0;">::</span><span style="color:#B2FF59;">Render</span><span style="color:#F8F8F0;">()&nbsp;{</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#aaa;">//&nbsp;If&nbsp;device&nbsp;is&nbsp;lost,&nbsp;BeginFrame&nbsp;will&nbsp;fail&nbsp;and&nbsp;we&nbsp;skip&nbsp;rendering</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; Graphics</span><span style="color:#FF5252;">*</span><span style="color:#F8F8F0;">&nbsp;graphics&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#B2FF59;">GetSubsystem</span><span style="color:#FF5252;">&lt;</span><span style="color:#E040FB;">Graphics</span><span style="color:#FF5252;">&gt;</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">if</span><span style="color:#F8F8F0;">&nbsp;(</span><span style="color:#FF5252;">!</span><span style="color:#F8F8F0;">graphics-&gt;</span><span style="color:#B2FF59;">BeginFrame</span><span style="color:#F8F8F0;">())&nbsp;</span><span style="color:#FF5252;">return</span><span style="color:#F8F8F0;">;</span></p>
<p><span style="color:#F8F8F0;">&nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#B2FF59;">GetSubsystem</span><span style="color:#FF5252;">&lt;</span><span style="color:#E040FB;">Renderer</span><span style="color:#FF5252;">&gt;</span><span style="color:#F8F8F0;">()-&gt;</span><span style="color:#B2FF59;">Render</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#B2FF59;">GetSubsystem</span><span style="color:#FF5252;">&lt;</span><span style="color:#E040FB;">UI</span><span style="color:#FF5252;">&gt;</span><span style="color:#F8F8F0;">()-&gt;</span><span style="color:#B2FF59;">Render</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; graphics-&gt;</span><span style="color:#B2FF59;">EndFrame</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">}</span></p>