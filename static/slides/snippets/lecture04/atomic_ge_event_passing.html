<p><span style="color:#E040FB;">void</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#40C4FF;">Object</span><span style="color:#F8F8F0;">::</span><span style="color:#B2FF59;">SendEvent</span><span style="color:#F8F8F0;">(StringHash&nbsp;</span><span style="color:#FFAB40;">eventType</span><span style="color:#F8F8F0;">,&nbsp;VariantMap</span><span style="color:#FF5252;">&amp;</span><span style="color:#FFAB40;">&nbsp;eventData</span><span style="color:#F8F8F0;">)&nbsp;{</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; SharedPtr</span><span style="color:#FF5252;">&lt;</span><span style="color:#F8F8F0;">EventReceiverGroup</span><span style="color:#FF5252;">&gt;</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#B2FF59;">group</span><span style="color:#F8F8F0;">(context-&gt;</span><span style="color:#B2FF59;">GetEventReceivers</span><span style="color:#F8F8F0;">(</span><span style="color:#40C4FF;">this</span><span style="color:#F8F8F0;">,&nbsp;eventType));</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">if</span><span style="color:#F8F8F0;">&nbsp;(group) {</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; group-&gt;</span><span style="color:#B2FF59;">BeginSendEvent</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">&nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">for</span><span style="color:#F8F8F0;">&nbsp;(</span><span style="color:#E040FB;">unsigned</span><span style="color:#F8F8F0;">&nbsp;i&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#FFAB40;">0</span><span style="color:#F8F8F0;">; i&nbsp;</span><span style="color:#FF5252;">&lt;</span><span style="color:#F8F8F0;">&nbsp;group-&gt;</span><span style="color:#40C4FF;">receivers_.</span><span style="color:#B2FF59;">Size</span><span style="color:#F8F8F0;">();&nbsp;</span><span style="color:#FF5252;">++</span><span style="color:#F8F8F0;">i)&nbsp;{</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Object</span><span style="color:#FF5252;">*</span><span style="color:#F8F8F0;">&nbsp;receiver&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;group-&gt;</span><span style="color:#40C4FF;">receivers_</span><span style="color:#F8F8F0;">[i];</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color:#aaa;">//&nbsp;Holes&nbsp;may&nbsp;exist&nbsp;if&nbsp;receivers&nbsp;removed&nbsp;during&nbsp;send</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">if</span><span style="color:#F8F8F0;">&nbsp;(</span><span style="color:#FF5252;">!</span><span style="color:#F8F8F0;">receiver)&nbsp;</span><span style="color:#FF5252;">continue</span><span style="color:#F8F8F0;">;</span></p>
<p><span style="color:#F8F8F0;">&nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; receiver-&gt;</span><span style="color:#B2FF59;">OnEvent</span><span style="color:#F8F8F0;">(</span><span style="color:#40C4FF;">this</span><span style="color:#F8F8F0;">,&nbsp;eventType,&nbsp;eventData);</span></p>
<p><span style="color:#F8F8F0;">&nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color:#aaa;">//&nbsp;If&nbsp;self&nbsp;has&nbsp;been&nbsp;destroyed&nbsp;as&nbsp;a&nbsp;result&nbsp;of&nbsp;event&nbsp;handling,&nbsp;exit</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">if</span><span style="color:#F8F8F0;">&nbsp;(self.</span><span style="color:#B2FF59;">Expired</span><span style="color:#F8F8F0;">())&nbsp;{</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group-&gt;</span><span style="color:#B2FF59;">EndSendEvent</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context-&gt;</span><span style="color:#B2FF59;">EndSendEvent</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">return</span><span style="color:#F8F8F0;">;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; processed.</span><span style="color:#B2FF59;">Insert</span><span style="color:#F8F8F0;">(receiver);</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; group-&gt;</span><span style="color:#B2FF59;">EndSendEvent</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; }</span></p>
<p><span style="color:#F8F8F0;">}</span></p>