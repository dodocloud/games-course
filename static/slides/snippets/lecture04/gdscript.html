<p><span style="color:yellow;">bullet.gd:</span></p>
<p><span style="color:#FF5252;">func</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#B2FF59;">_on_bullet_body_enter</span><span style="color:#F8F8F0;">(&nbsp;body&nbsp;):</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">if</span><span style="color:#F8F8F0;">&nbsp;body.</span><span style="color:#B2FF59;">has_method</span><span style="color:#F8F8F0;">(</span><span style="color:yellow;">"hit_by_bullet"</span><span style="color:#F8F8F0;">):</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; body.</span><span style="color:#B2FF59;">call</span><span style="color:#F8F8F0;">(</span><span style="color:yellow;">"hit_by_bullet"</span><span style="color:#F8F8F0;">)</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp;&nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></p>
<p><span style="color:yellow;">enemy.gd:</span></p>
<p><span style="color:#FF5252;">func</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#B2FF59;">_physics_process</span><span style="color:#F8F8F0;">(delta):</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">var</span><span style="color:#F8F8F0;">&nbsp;new_anim&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:yellow;">"idle"</span></p>
<p><span style="color:#F8F8F0;">&nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">if</span><span style="color:#F8F8F0;">&nbsp;state</span><span style="color:#FF5252;">==</span><span style="color:#F8F8F0;">STATE_WALKING:</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; linear_velocity&nbsp;</span><span style="color:#FF5252;">+=</span><span style="color:#F8F8F0;">&nbsp;GRAVITY_VEC&nbsp;</span><span style="color:#FF5252;">*</span><span style="color:#F8F8F0;">&nbsp;delta</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; linear_velocity.x&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;direction&nbsp;</span><span style="color:#FF5252;">*</span><span style="color:#F8F8F0;">&nbsp;WALK_SPEED</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; linear_velocity&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#B2FF59;">move_and_slide</span><span style="color:#F8F8F0;">(linear_velocity,&nbsp;FLOOR_NORMAL)</span></p>
<p><span style="color:#F8F8F0;">&nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; new_anim&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:yellow;">"walk"</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">else</span><span style="color:#F8F8F0;">:</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; new_anim&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:yellow;">"explode"</span></p>
<p><span style="color:#F8F8F0;">&nbsp;</span></p>
<p><span style="color:#FF5252;">func</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#B2FF59;">hit_by_bullet</span><span style="color:#F8F8F0;">():</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; state&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;STATE_KILLED</span></p>      