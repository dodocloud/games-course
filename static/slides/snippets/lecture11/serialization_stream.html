<p><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#E040FB;">struct</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#40C4FF;">Mage</span><span style="color:#F8F8F0;">&nbsp;:&nbsp;</span><span style="color:#E040FB;">public</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#40C4FF;">Streamable</span><span style="color:#F8F8F0;">&nbsp;{</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; vector</span><span style="color:#FF5252;">&lt;</span><span style="color:#F8F8F0;">Item</span><span style="color:#FF5252;">*&gt;</span><span style="color:#F8F8F0;">&nbsp;items;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#E040FB;">int</span><span style="color:#F8F8F0;">&nbsp;health;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#E040FB;">int</span><span style="color:#F8F8F0;">&nbsp;mana; &nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp;&nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#E040FB;">void</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#B2FF59;">SaveToStream</span><span style="color:#F8F8F0;">(NetWriter</span><span style="color:#FF5252;">*</span><span style="color:#FFAB40;">&nbsp;writer</span><span style="color:#F8F8F0;">)&nbsp;{</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; writer-&gt;</span><span style="color:#B2FF59;">WriteDWord</span><span style="color:#F8F8F0;">(health);</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; writer-&gt;</span><span style="color:#B2FF59;">WriteDWord</span><span style="color:#F8F8F0;">(mana);</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; writer-&gt;</span><span style="color:#B2FF59;">WriteDWord</span><span style="color:#F8F8F0;">(items.</span><span style="color:#B2FF59;">size</span><span style="color:#F8F8F0;">());</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">for</span><span style="color:#F8F8F0;">(</span><span style="color:#E040FB;">auto</span><span style="color:#F8F8F0;">&nbsp;item : items) item-&gt;</span><span style="color:#B2FF59;">SaveToStream</span><span style="color:#F8F8F0;">(writer);</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; }</span></p>
<p><span style="color:#F8F8F0;">&nbsp;&nbsp;</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp;&nbsp;</span><span style="color:#E040FB;">void</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#B2FF59;">LoadFromStream</span><span style="color:#F8F8F0;">(NetReader</span><span style="color:#FF5252;">*</span><span style="color:#FFAB40;">&nbsp;reader</span><span style="color:#F8F8F0;">)&nbsp;{</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; health&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;reader-&gt;</span><span style="color:#B2FF59;">ReadDWord</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; mana&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;reader-&gt;</span><span style="color:#B2FF59;">ReadDWord</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color:#E040FB;">int</span><span style="color:#F8F8F0;">&nbsp;itemsCount&nbsp;</span><span style="color:#FF5252;">=</span><span style="color:#F8F8F0;">&nbsp;reader-&gt;</span><span style="color:#B2FF59;">ReadDWord</span><span style="color:#F8F8F0;">();</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color:#FF5252;">for</span><span style="color:#F8F8F0;">(</span><span style="color:#E040FB;">int</span><span style="color:#F8F8F0;">&nbsp;i</span><span style="color:#FF5252;">=</span><span style="color:#FFAB40;">0</span><span style="color:#F8F8F0;">;&nbsp;i</span><span style="color:#FF5252;">&lt;</span><span style="color:#F8F8F0;">itemsCount;&nbsp;i</span><span style="color:#FF5252;">++</span><span style="color:#F8F8F0;">)&nbsp;{</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; items.</span><span style="color:#B2FF59;">push_back</span><span style="color:#F8F8F0;">(</span><span style="color:#FF5252;">new</span><span style="color:#F8F8F0;">&nbsp;</span><span style="color:#B2FF59;">Item</span><span style="color:#F8F8F0;">(reader));</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p>
<p><span style="color:#F8F8F0;">&nbsp; &nbsp; }</span></p>
<p><span style="color:#F8F8F0;">}</span></p>