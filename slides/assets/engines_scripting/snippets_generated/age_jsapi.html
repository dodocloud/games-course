<pre><table><tr><td><span class="linenum">   1</span></td><td> <span class="token comment">// Duktape JS mapping</span></td></tr>
<tr><td><span class="linenum">   2</span></td><td> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">jsb_class_define_FileSystem</span><span class="token punctuation">(</span>JSVM<span class="token operator">*</span> vm<span class="token punctuation">)</span> <span class="token punctuation">{</span></td></tr>
<tr><td><span class="linenum">   3</span></td><td>   duk_context<span class="token operator">*</span> ctx <span class="token operator">=</span> vm<span class="token operator">-></span><span class="token function">GetJSContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">   4</span></td><td>   <span class="token function">js_class_get_constructor</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">"Atomic"</span><span class="token punctuation">,</span> <span class="token string">"FileSystem"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">   5</span></td><td>   <span class="token function">js_class_get_prototype</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">"Atomic"</span><span class="token punctuation">,</span> <span class="token string">"FileSystem"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">   6</span></td><td>   <span class="token function">duk_pop_2</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">   7</span></td><td>   <span class="token function">js_class_get_prototype</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">"Atomic"</span><span class="token punctuation">,</span> <span class="token string">"FileSystem"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">   8</span></td><td>   <span class="token function">duk_push_c_function</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> jsb_class_FileSystem_SetCurrentDir<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">   9</span></td><td>   <span class="token function">duk_put_prop_string</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"setCurrentDir"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  10</span></td><td>   <span class="token function">duk_push_c_function</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> jsb_class_FileSystem_CreateDir<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  11</span></td><td>   <span class="token function">duk_put_prop_string</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"createDir"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  12</span></td><td> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></td></tr>
<tr><td><span class="linenum">  13</span></td><td> <span class="token punctuation">}</span></td></tr>
<tr><td><span class="linenum">  14</span></td><td>  </td></tr>
<tr><td><span class="linenum">  15</span></td><td> <span class="token comment">// CreateDir method</span></td></tr>
<tr><td><span class="linenum">  16</span></td><td> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">jsb_class_FileSystem_CreateDir</span><span class="token punctuation">(</span>duk_context<span class="token operator">*</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span></td></tr>
<tr><td><span class="linenum">  17</span></td><td>   String __arg0 <span class="token operator">=</span> <span class="token function">duk_to_string</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  18</span></td><td>   <span class="token function">duk_push_this</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  19</span></td><td>   FileSystem<span class="token operator">*</span> native <span class="token operator">=</span> js_to_class_instance<span class="token operator">&lt;</span>FileSystem<span class="token operator">></span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  20</span></td><td>   <span class="token keyword">bool</span> retValue <span class="token operator">=</span> native<span class="token operator">-></span><span class="token function">CreateDir</span><span class="token punctuation">(</span>__arg0<span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  21</span></td><td>   <span class="token function">duk_push_boolean</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> retValue <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  22</span></td><td>   <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  23</span></td><td> <span class="token punctuation">}</span></td></tr></table></pre>