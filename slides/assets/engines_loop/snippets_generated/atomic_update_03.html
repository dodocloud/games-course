<pre><table><tr><td><span class="linenum">   1</span></td><td> <span class="token keyword">void</span> <span class="token class-name">Engine</span><span class="token operator">::</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> </td></tr>
<tr><td><span class="linenum">   2</span></td><td>     VariantMap<span class="token operator">&amp;</span> eventData <span class="token operator">=</span> <span class="token function">GetEventDataMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">   3</span></td><td>     eventData<span class="token punctuation">[</span>P_TIMESTEP<span class="token punctuation">]</span> <span class="token operator">=</span> timeStep_<span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">   4</span></td><td>     <span class="token function">SendEvent</span><span class="token punctuation">(</span>E_UPDATE<span class="token punctuation">,</span> eventData<span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">   5</span></td><td>  </td></tr>
<tr><td><span class="linenum">   6</span></td><td>     <span class="token comment">// Logic post-update event</span></td></tr>
<tr><td><span class="linenum">   7</span></td><td>     <span class="token function">SendEvent</span><span class="token punctuation">(</span>E_POSTUPDATE<span class="token punctuation">,</span> eventData<span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">   8</span></td><td>     <span class="token comment">// Rendering update event</span></td></tr>
<tr><td><span class="linenum">   9</span></td><td>     <span class="token function">SendEvent</span><span class="token punctuation">(</span>E_RENDERUPDATE<span class="token punctuation">,</span> eventData<span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  10</span></td><td>     <span class="token comment">// Post-render update event</span></td></tr>
<tr><td><span class="linenum">  11</span></td><td>     <span class="token function">SendEvent</span><span class="token punctuation">(</span>E_POSTRENDERUPDATE<span class="token punctuation">,</span> eventData<span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  12</span></td><td> <span class="token punctuation">}</span></td></tr>
<tr><td><span class="linenum">  13</span></td><td>  </td></tr>
<tr><td><span class="linenum">  14</span></td><td> <span class="token keyword">void</span> <span class="token class-name">Engine</span><span class="token operator">::</span><span class="token function">Render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></td></tr>
<tr><td><span class="linenum">  15</span></td><td>     <span class="token comment">// If device is lost, BeginFrame will fail and we skip rendering</span></td></tr>
<tr><td><span class="linenum">  16</span></td><td>     Graphics<span class="token operator">*</span> graphics <span class="token operator">=</span> GetSubsystem<span class="token operator">&lt;</span>Graphics<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  17</span></td><td>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>graphics<span class="token operator">-></span><span class="token function">BeginFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  18</span></td><td>  </td></tr>
<tr><td><span class="linenum">  19</span></td><td>     GetSubsystem<span class="token operator">&lt;</span>Renderer<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  20</span></td><td>     GetSubsystem<span class="token operator">&lt;</span>UI<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  21</span></td><td>     graphics<span class="token operator">-></span><span class="token function">EndFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></td></tr>
<tr><td><span class="linenum">  22</span></td><td> <span class="token punctuation">}</span></td></tr></table></pre>