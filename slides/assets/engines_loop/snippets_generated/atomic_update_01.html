<pre><span class="linenum">   1</span> <span class="token keyword">int</span> <span class="token class-name">Application</span><span class="token operator">::</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="linenum">   2</span>         <span class="token function">Setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="linenum">   3</span>         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>engine_<span class="token operator">-></span><span class="token function">Initialize</span><span class="token punctuation">(</span>engineParameters_<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="linenum">   4</span>             <span class="token keyword">return</span> <span class="token function">ErrorExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="linenum">   5</span>         <span class="token punctuation">}</span>
<span class="linenum">   6</span>  
<span class="linenum">   7</span>         <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="linenum">   8</span>  
<span class="linenum">   9</span> <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token operator">!</span><span class="token function">defined</span><span class="token punctuation">(</span>IOS<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">defined</span><span class="token punctuation">(</span>__EMSCRIPTEN__<span class="token punctuation">)</span></span></span>
<span class="linenum">  10</span>         <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>engine_<span class="token operator">-></span><span class="token function">IsExiting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="linenum highlight">  11</span> <span class="highlight">            engine_->RunFrame();</span>
<span class="linenum">  12</span>         <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="linenum">  13</span> <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
<span class="linenum">  14</span> <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>IOS<span class="token punctuation">)</span></span></span>
<span class="linenum">  15</span>         <span class="token function">SDL_iPhoneSetAnimationCallback</span><span class="token punctuation">(</span><span class="token function">GetWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>RunFrame<span class="token punctuation">,</span> engine_<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="linenum">  16</span> <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>__EMSCRIPTEN__<span class="token punctuation">)</span></span></span>
<span class="linenum">  17</span>         <span class="token function">emscripten_set_main_loop_arg</span><span class="token punctuation">(</span>RunFrame<span class="token punctuation">,</span> engine_<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="linenum">  18</span> <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="linenum">  19</span> <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="linenum">  20</span>         <span class="token keyword">return</span> exitCode_<span class="token punctuation">;</span>
<span class="linenum">  21</span> <span class="token punctuation">}</span></pre>