<pre><span class="linenum">   1</span> <span class="token keyword">bool</span> <span class="token class-name">Main</span><span class="token operator">::</span><span class="token function">iteration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="linenum">   2</span> 	iterating<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="linenum">   3</span> 
<span class="linenum">   4</span> 	<span class="token keyword">uint64_t</span> ticks <span class="token operator">=</span> <span class="token class-name">OS</span><span class="token operator">::</span><span class="token function">get_singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">get_ticks_usec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="linenum">   5</span> 	<span class="token class-name">Engine</span><span class="token operator">::</span><span class="token function">get_singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span>_frame_ticks <span class="token operator">=</span> ticks<span class="token punctuation">;</span>
<span class="linenum">   6</span> 	<span class="token comment">// update elapsed ticks</span>
<span class="linenum">   7</span> 	<span class="token comment">// ...</span>
<span class="linenum">   8</span> 	MainFrameTime advance <span class="token operator">=</span> main_timer_sync<span class="token punctuation">.</span><span class="token function">advance</span><span class="token punctuation">(</span>frame_slice<span class="token punctuation">,</span> physics_fps<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="linenum">   9</span> 
<span class="linenum">  10</span> 	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> iters <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> iters <span class="token operator">&lt;</span> advance<span class="token punctuation">.</span>physics_steps<span class="token punctuation">;</span> <span class="token operator">++</span>iters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="linenum">  11</span> 		<span class="token comment">// ... update PhysicsServer3D		</span>
<span class="linenum">  12</span> 	<span class="token punctuation">}</span>
<span class="linenum">  13</span> 
<span class="linenum">  14</span> 	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">DisplayServer</span><span class="token operator">::</span><span class="token function">get_singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">can_any_window_draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="linenum">  15</span> 		<span class="token comment">// ... draw frame</span>
<span class="linenum">  16</span> 	<span class="token punctuation">}</span>
<span class="linenum">  17</span> 
<span class="linenum">  18</span> 	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">ScriptServer</span><span class="token operator">::</span><span class="token function">get_language_count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="linenum">  19</span> 		<span class="token comment">// ... update scene for each scripting language</span>
<span class="linenum">  20</span> 		<span class="token class-name">ScriptServer</span><span class="token operator">::</span><span class="token function">get_language</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">frame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="linenum">  21</span> 	<span class="token punctuation">}</span>
<span class="linenum">  22</span> 
<span class="linenum">  23</span> 	<span class="token class-name">AudioServer</span><span class="token operator">::</span><span class="token function">get_singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="linenum">  24</span> 	frames<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="linenum">  25</span> 	<span class="token keyword">return</span> exit <span class="token operator">||</span> auto_quit<span class="token punctuation">;</span>
<span class="linenum">  26</span> <span class="token punctuation">}</span></pre>